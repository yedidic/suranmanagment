<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ניהול קליניקה</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&family=Noto+Sans+Hebrew:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./styles.css">
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <h1>ניהול קליניקה <span class="dot"></span></h1>
  <div class="tabs">
    <button class="tab active" data-tab="calendar">יומן</button>
    <button class="tab" data-tab="slots">תורים</button>
    <button class="tab" data-tab="tenants">מטפלים</button>
    <button class="tab" data-tab="types">סוגי טיפול</button>
  </div>
</div>

<div class="container">

  <!-- ====== CALENDAR ====== -->
  <div id="panel-calendar" class="panel">
    <div class="cal-toolbar">
      <button class="btn btn-ghost btn-icon" onclick="calNav(-1)">→</button>
      <div class="cal-title" id="cal-title"></div>
      <button class="btn btn-ghost btn-icon" onclick="calNav(1)">←</button>
      <button class="btn btn-outline btn-sm" onclick="calToday()">היום</button>
      <div class="cal-views">
        <button class="btn btn-outline btn-sm active" data-calview="month" onclick="setCalView('month')">חודש</button>
        <button class="btn btn-outline btn-sm" data-calview="week" onclick="setCalView('week')">שבוע</button>
        <button class="btn btn-outline btn-sm" data-calview="day" onclick="setCalView('day')">יום</button>
      </div>
    </div>
    <div id="cal-container"></div>
  </div>

  <!-- ====== SLOTS TABLE ====== -->
  <div id="panel-slots" class="panel" style="display:none">
    <div class="section-header">
      <h2>תורים <span class="count-badge" id="slots-count">0</span></h2>
      <button class="btn btn-primary" onclick="openSlotModal()">＋ תור חדש</button>
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr>
          <th>תאריך</th><th>התחלה</th><th>סיום</th><th>מטפל</th><th>סוג</th><th>לקוח</th><th></th>
        </tr></thead>
        <tbody id="slots-body">
          <tr><td colspan="7"><div class="loading"><div class="spinner"></div>טוען...</div></td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ====== TENANTS ====== -->
  <div id="panel-tenants" class="panel" style="display:none">
    <div class="section-header">
      <h2>מטפלים <span class="count-badge" id="tenants-count">0</span></h2>
      <button class="btn btn-primary" onclick="openTenantModal()">＋ מטפל חדש</button>
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>שם</th><th>סוגי טיפול</th><th>אימייל</th><th></th></tr></thead>
        <tbody id="tenants-body">
          <tr><td colspan="4"><div class="loading"><div class="spinner"></div>טוען...</div></td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ====== TYPES ====== -->
  <div id="panel-types" class="panel" style="display:none">
    <div class="section-header">
      <h2>סוגי טיפול <span class="count-badge" id="types-count">0</span></h2>
      <button class="btn btn-primary" onclick="openTypeModal()">＋ סוג חדש</button>
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>שם</th><th>שיעור קבוצתי</th><th></th></tr></thead>
        <tbody id="types-body">
          <tr><td colspan="3"><div class="loading"><div class="spinner"></div>טוען...</div></td></tr>
        </tbody>
      </table>
    </div>
  </div>

</div>

<!-- MODAL -->
<div class="modal-overlay" id="modal-overlay" onclick="event.target===this && closeModal()">
  <div class="modal" id="modal-content"></div>
</div>

<!-- TOASTS -->
<div class="toast-container" id="toast-container"></div>
<div id="global-loading-overlay" class="global-loading-overlay">
  <div class="global-loading-box"><span class="spinner"></span><span>טוען...</span></div>
</div>

<script src="./app.js"></script>
</body>
</html>
